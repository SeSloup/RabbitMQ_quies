# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –∫ –∑–∞–Ω—è—Ç–∏—é  ¬´–û—á–µ—Ä–µ–¥–∏ RabbitMQ¬ª


---

### –ó–∞–¥–∞–Ω–∏–µ 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ RabbitMQ

–ò—Å–ø–æ–ª—å–∑—É—è Vagrant –∏–ª–∏ VirtualBox, —Å–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ RabbitMQ.
–î–æ–±–∞–≤—å—Ç–µ management plug-in –∏ –∑–∞–π–¥–∏—Ç–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

*–ò—Ç–æ–≥–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–Ω—à–æ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ RabbitMQ.*


![—Å–∫—Ä–∏–Ω—à–æ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ RabbitMQ.](https://github.com/SeSloup/RabbitMQ_quies/blob/main/screenshots/01.png)

---

### –ó–∞–¥–∞–Ω–∏–µ 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

–ò—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã, –ø—Ä–æ–≤–µ–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç producer.py.

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python –≤–µ—Ä—Å–∏–∏ 3 –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É Pika.
–¢–∞–∫–∂–µ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å IP-–∞–¥—Ä–µ—Å –º–∞—à–∏–Ω—ã, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø—É—â–µ–Ω RabbitMQ, –∑–∞–º–µ–Ω–∏–≤ localhost –Ω–∞ –Ω—É–∂–Ω—ã–π IP.

```shell script
$ pip install pika
```

–ó–∞–π–¥–∏—Ç–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–∞–π–¥–∏—Ç–µ –æ—á–µ—Ä–µ–¥—å –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º hello –∏ —Å–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç.
–ü–æ—Å–ª–µ —á–µ–≥–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ç–æ—Ä–æ–π —Å–∫—Ä–∏–ø—Ç consumer.py –∏ —Å–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞


`—Å–∫—Ä–∏–Ω—à–æ—Ç –æ—á–µ—Ä–µ–¥—å hello_netology.` 
![—Å–∫—Ä–∏–Ω—à–æ—Ç producer.py.](https://github.com/SeSloup/RabbitMQ_quies/blob/main/screenshots/02.png)

`—Å–∫—Ä–∏–Ω—à–æ—Ç consumer.py.` 
![—Å–∫—Ä–∏–Ω—à–æ—Ç consumer.py.](https://github.com/SeSloup/RabbitMQ_quies/blob/main/screenshots/02(1).png)

---

### –ó–∞–¥–∞–Ω–∏–µ 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ HA –∫–ª–∞—Å—Ç–µ—Ä–∞

–ò—Å–ø–æ–ª—å–∑—É—è Vagrant –∏–ª–∏ VirtualBox, —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ç–æ—Ä—É—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ RabbitMQ.
–ó–∞—Ç–µ–º –æ–±—ä–µ–¥–∏–Ω–∏—Ç–µ –¥–≤–µ –º–∞—à–∏–Ω—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫—É ha-all –Ω–∞ –≤—Å–µ –æ—á–µ—Ä–µ–¥–∏.

*–í –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ—à–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–æ–¥–∞—Ö –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–æ–π.*

–¢–∞–∫–∂–µ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã —Å –¥–≤—É—Ö –Ω–æ–¥:

```shell script
$ rabbitmqctl cluster_status
```

–î–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç producer.py –∏ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –∫–∞–∂–¥–æ–π –∏–∑ –Ω–æ–¥:

```shell script
$ rabbitmqadmin get queue='hello'
```

–ü–æ—Å–ª–µ —á–µ–≥–æ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫–ª—é—á–∏—Ç—å –æ–¥–Ω—É –∏–∑ –Ω–æ–¥, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Ç—É, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥–∫–ª—é—á–∞–ª–∏—Å—å –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞, –∑–∞—Ç–µ–º –ø–æ–ø—Ä–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ —Å–∫—Ä–∏–ø—Ç–µ consumer.py –Ω–∞ –≤—Ç–æ—Ä—É—é –Ω–æ–¥—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ.

*–ü—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä–∞–±–æ—Ç—ã –≤—Ç–æ—Ä–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞.*

`1 cluster_status`
![1](https://github.com/SeSloup/RabbitMQ_quies/blob/main/screenshots/03.png)

`2 get queue=`
![2](https://github.com/SeSloup/RabbitMQ_quies/blob/main/screenshots/03(1).png)

`3 –æ—Ç–∫–ª—é—á–∏—Ç—å –æ–¥–Ω—É –Ω–æ–¥—É, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–≥—É—é`
- –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–¥—ã '''docker exec -it rabbitmq-rabbitmq3-1 rabbitmqctl stop_app'''
- –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç –Ω–∞ —Ç—Ä–µ–±—É–µ–º–æ–π –Ω–æ–¥–µ –Ω–∞–ø—Ä–∏–º–µ—Ä *PORT*
- –∏–∑–º–µ–Ω–∏—Ç—å –≤ consumer.py —Ö–æ—Å—Ç –Ω–∞ –Ω—É–∂–Ω—ã–π ( –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ localhost) –∏ –ø–æ—Ä—Ç *PORT*
--------------------------------------
–°–ø–∞—Å–∏–±–æ –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫—É! ‚òï ü•ë

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è (—Å–æ –∑–≤—ë–∑–¥–æ—á–∫–æ–π*)
–≠—Ç–∏ –∑–∞–¥–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ, —Ç–æ –µ—Å—Ç—å –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é, –∏ –Ω–∏–∫–∞–∫ –Ω–µ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤–∞–º–∏ –∑–∞—á—ë—Ç–∞ –ø–æ —ç—Ç–æ–º—É –¥–æ–º–∞—à–Ω–µ–º—É –∑–∞–¥–∞–Ω–∏—é. –í—ã –º–æ–∂–µ—Ç–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–∏—Ç—å, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≥–ª—É–±–∂–µ —à–∏—Ä–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –º–∞—Ç–µ—Ä–∏–∞–ª–µ.

### * –ó–∞–¥–∞–Ω–∏–µ 4. Ansible playbook

–ù–∞–ø–∏—à–∏—Ç–µ –ø–ª–µ–π–±—É–∫, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É RabbitMQ –Ω–∞ –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–¥ –∏ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –∏—Ö –≤ –∫–ª–∞—Å—Ç–µ—Ä.
–ü—Ä–∏ —ç—Ç–æ–º –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É ha-all.

*–ì–æ—Ç–æ–≤—ã–π –ø–ª–µ–π–±—É–∫ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ –≤ —Å–≤–æ—ë–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.*

